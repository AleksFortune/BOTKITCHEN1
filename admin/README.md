# MealBot Admin Panel

–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è MealBot ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–µ—Ü–µ–ø—Ç–æ–≤.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd admin
pip install -r requirements_admin.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å –≤ `.env` —Ñ–∞–π–ª:

```env
# –û—Å–Ω–æ–≤–Ω—ã–µ (—É–∂–µ –µ—Å—Ç—å)
TELEGRAM_TOKEN=your_token
DATABASE_URL=postgresql://...
ADMIN_ID=123456789

# –î–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your_secure_password
ADMIN_SECRET_KEY=random-secret-key-for-sessions
```

### 3. –ó–∞–ø—É—Å–∫

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫
python admin.py

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ uvicorn
uvicorn admin:app --host 0.0.0.0 --port 8000 --reload
```

–ê–¥–º–∏–Ω–∫–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000/admin`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
admin/
‚îú‚îÄ‚îÄ admin.py              # –û—Å–Ω–æ–≤–Ω–æ–µ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ auth.py               # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îú‚îÄ‚îÄ database_admin.py     # –ó–∞–ø—Ä–æ—Å—ã –∫ –ë–î
‚îú‚îÄ‚îÄ requirements_admin.txt # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îî‚îÄ‚îÄ css/
‚îÇ       ‚îî‚îÄ‚îÄ admin.css     # –°—Ç–∏–ª–∏
‚îî‚îÄ‚îÄ templates/
    ‚îú‚îÄ‚îÄ base.html         # –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
    ‚îú‚îÄ‚îÄ login.html        # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
    ‚îú‚îÄ‚îÄ dashboard.html    # –ì–ª–∞–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥
    ‚îú‚îÄ‚îÄ users.html        # –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    ‚îú‚îÄ‚îÄ user_detail.html  # –î–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚îú‚îÄ‚îÄ recipes.html      # –°–ø–∏—Å–æ–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤
    ‚îú‚îÄ‚îÄ recipe_detail.html # –î–µ—Ç–∞–ª–∏ —Ä–µ—Ü–µ–ø—Ç–∞
    ‚îî‚îÄ‚îÄ recipe_edit.html  # –†–µ–¥–∞–∫—Ç–æ—Ä —Ä–µ—Ü–µ–ø—Ç–∞
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –°–µ—Å—Å–∏–∏ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (8 —á–∞—Å–æ–≤)
- HTTP-only cookies
- –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF (SameSite=Lax)
- –í production –≤–∫–ª—é—á–∏ HTTPS –∏ secure cookies

## üìä –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Dashboard
- üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–≤—Å–µ–≥–æ, –Ω–æ–≤—ã–µ, –∞–∫—Ç–∏–≤–Ω—ã–µ)
- üíé –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø–æ–¥–ø–∏—Å–∫–∏
- üçΩÔ∏è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤
- üî• –í–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å (–∏–∑–±—Ä–∞–Ω–Ω–æ–µ, –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–æ)
- üìâ Cohort analysis (—É–¥–µ—Ä–∂–∞–Ω–∏–µ)

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, username, ID
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É –ø–æ–¥–ø–∏—Å–∫–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è
- –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π
- –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –†–µ—Ü–µ–ø—Ç—ã
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–Ω—é, —Ç–∏–ø—É –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
- –£–¥–∞–ª–µ–Ω–∏–µ

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –±–æ—Ç–æ–º

–ê–¥–º–∏–Ω–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—É –∂–µ –ë–î (`database.py` –∏ `models.py`), –ø–æ—ç—Ç–æ–º—É –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –≤–∏–¥–Ω—ã –≤ –±–æ—Ç–µ.

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Render

–î–æ–±–∞–≤—å –≤ `render.yaml`:

```yaml
services:
  - type: web
    name: mealbot-admin
    runtime: python
    buildCommand: pip install -r admin/requirements_admin.txt
    startCommand: cd admin && uvicorn admin:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: mealbot-db
          property: connectionString
      - key: ADMIN_USERNAME
        value: admin
      - key: ADMIN_PASSWORD
        generateValue: true
      - key: ADMIN_SECRET_KEY
        generateValue: true
```

## üìù TODO

- [ ] –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (Chart.js)
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV/Excel
- [ ] –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- [ ] –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∞
- [ ] 2FA –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ ] –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
